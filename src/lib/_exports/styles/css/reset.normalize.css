@layer normalize {
	:where(details) {
		display: inline-flex;
		min-height: 0;
		position: relative;
		width: fit-content;
	}

	:where(a, button, summary) {
		--bg: none;
		--clr: inherit;
		--gap: calc(var(--spacing) * 0.25);
		--mx: 0;
		--my: 0;
		--px: var(--spacing);
		--py: 0;
		--radius: var(--scale-5xl);
		--spacing: var(--scale-sm);

		align-items: center;
		background-color: var(--bg);
		border-radius: var(--radius);
		color: var(--clr);
		cursor: pointer;
		display: inline-flex;
		font-size: var(--scale-sm);
		font-weight: 400;
		gap: var(--gap);
		margin: var(--my) var(--mx);
		overflow: clip;
		padding: var(--py) var(--px);
		text-overflow: ellipsis;
		transition: background-color var(--animDefaults), color var(--animDefaults);
		white-space: nowrap;
		width: fit-content;

		/* text must be wrapped */
		& > span {
			flex: 1 1 100%;
		}

		/* No icons */
		&:not(:has(:where([class*='material-symbols'], .icon, ly-icon):first-child)):not(:has(:where([class*='material-symbols'], .icon, ly-icon):last-child)) {
			--gap: 0;
			--px: calc(var(--spacing) * 1.5);
		}

		/* Left icon only */
		&:has(:where([class*='material-symbols'], .icon, ly-icon):first-child):is(:not(:has(:where([class*='material-symbols'], .icon, ly-icon):last-child))) {
			padding-inline-end: calc(var(--spacing) * 1.25);
		}

		/* Right icon only */
		&:has(:where([class*='material-symbols'], .icon, ly-icon):last-child):is(:not(:has(:where([class*='material-symbols'], .icon, ly-icon):first-child))) {
			padding-inline-start: calc(var(--spacing) * 1.25);
		}

		/* Both icons */
		&:has(:where([class*='material-symbols'], .icon, ly-icon):first-child):has(:where([class*='material-symbols'], .icon, ly-icon):last-child) {
			--gap: calc(var(--spacing) * 0.5);
		}

		/* link only */
		&:is(a) {
			height: max-content;
			padding: 0;

			&[href] {
				--clr: var(--clr-accent);
			}
		}

		/* button, summary only */
		&:is(button, summary) {
			--bg: var(--clr-background);

			height: var(--scale-5xl);
			outline: solid 0.125rem var(--clr-primary);
		}

		/* Micro Interactions */
		&:focus-visible {
			outline-color: color-mix(in var(--prefers-colorSpace, srgb),
					var(--clr),
					transparent 56%) !important;
		}

		@media (hover: hover) {
			&:hover {
				background-color: color-mix(in var(--prefers-colorSpace, srgb),
						var(--bg),
						white 3%) !important;
				color: color-mix(in var(--prefers-colorSpace, srgb),
						var(--clr),
						white 16%) !important;
			}
		}

		&:active {
			background-color: color-mix(in var(--prefers-colorSpace, srgb),
					var(--bg),
					black 3%) !important;
			color: color-mix(in var(--prefers-colorSpace, srgb),
					var(--clr),
					black 16%) !important;
		}
	}

	:where(input, select, textarea) {
		--bg: var(--clr-background);
		--clr: inherit;
		--gap: calc(var(--spacing) * 0.25);
		--mx: 0;
		--my: 0;
		--outln-clr: var(--clr);
		--px: var(--spacing);
		--py: 0;
		--radius: var(--scale-sm);
		--spacing: var(--scale-5xs);

		align-items: center;
		background-color: var(--bg);
		border-radius: var(--radius);
		color: var(--clr);
		cursor: pointer;
		display: inline-flex;
		font-size: var(--scale-sm);
		font-weight: 400;
		gap: var(--gap);
		margin: var(--my) var(--mx);
		outline: solid 0.125rem color-mix(in srgb, var(--bg), white 3%);
		overflow: clip;
		padding: var(--py) var(--px);
		text-overflow: ellipsis;
		transition: background-color var(--animDefaults), color var(--animDefaults),
			outline-color var(--animDefaults);
		white-space: nowrap;
		width: fit-content;

		/* input, select only */
		&:is(input, select) {
			height: var(--scale-5xl);
		}

		/* input only */
		&:is(input) {

			&::-webkit-inner-spin-button,
			&::-webkit-outer-spin-button {
				display: none;
			}

			&::-webkit-calendar-picker-indicator {
				cursor: pointer;
				height: 100%;
				inset: 0;
				opacity: 0;
				position: absolute;
				width: 100%;
			}

			&[type='file'] {
				display: none;
			}
		}

		/* textarea only */
		&:is(textarea) {
			--py: var(--spacing);
			height: max-content;
			min-height: calc(var(--scale-5xl) * 1.75);
			overflow: auto;
			resize: both;
			text-wrap: pretty;
		}

		/* Micro Interactions */
		&:focus-visible {
			--outln-clr: var(--clr-accent);

			outline-color: color-mix(in var(--prefers-colorSpace, srgb),
					var(--outln-clr),
					transparent 56%) !important;
		}

		@media (hover: hover) {
			&:hover {
				outline-color: color-mix(in var(--prefers-colorSpace, srgb),
						var(--clr),
						white 16%) !important;
			}
		}

		&:active {
			outline-color: color-mix(in var(--prefers-colorSpace, srgb),
					var(--clr),
					black 16%) !important;
		}
	}
}